var __defProp = Object.defineProperty;
var __name = (target, value) => __defProp(target, "name", { value, configurable: true });
import { proxyActivities, workflowInfo, startChild, executeChild } from "@temporalio/workflow";
import { readdirSync, statSync, readFileSync } from "fs";
import { normalize, join } from "path";
import appRootPath from "app-root-path";
import trimStart from "lodash/trimStart.js";
var LOG_MESSAGE_TYPE = /* @__PURE__ */ ((LOG_MESSAGE_TYPE2) => {
  LOG_MESSAGE_TYPE2["FAIL"] = "fail";
  LOG_MESSAGE_TYPE2["SUCCESS"] = "success";
  return LOG_MESSAGE_TYPE2;
})(LOG_MESSAGE_TYPE || {});
var WORKFLOW_EXECUTION = /* @__PURE__ */ ((WORKFLOW_EXECUTION2) => {
  WORKFLOW_EXECUTION2["PARALLEL"] = "parallel";
  WORKFLOW_EXECUTION2["SEQUENTIAL"] = "sequential";
  return WORKFLOW_EXECUTION2;
})(WORKFLOW_EXECUTION || {});
var WORKFLOW_STEP_TYPE = /* @__PURE__ */ ((WORKFLOW_STEP_TYPE2) => {
  WORKFLOW_STEP_TYPE2["TASK"] = "task";
  WORKFLOW_STEP_TYPE2["WORKFLOW"] = "workflow";
  return WORKFLOW_STEP_TYPE2;
})(WORKFLOW_STEP_TYPE || {});
const _NotFoundError = class _NotFoundError extends Error {
  constructor(message) {
    super(`not found: ${message}`);
  }
};
__name(_NotFoundError, "NotFoundError");
let NotFoundError = _NotFoundError;
const mapSequence = /* @__PURE__ */ __name(async (params) => {
  if (params.length === 0) return [];
  const [first, ...rest] = params;
  return [await first(), ...await mapSequence(rest)];
}, "mapSequence");
const STATUS_UPDATE = "statusUpdate";
const WORKFLOW_RETRY_DEFAULT = 3;
const WORKFLOW_INTERVAL_DEFAULT = 1e3;
const WORKFLOW_TIMEOUT_DEFAULT = 6e4;
const _buildWorkflow = /* @__PURE__ */ __name(({
  execution = WORKFLOW_EXECUTION.SEQUENTIAL,
  interval = WORKFLOW_INTERVAL_DEFAULT,
  retry = WORKFLOW_RETRY_DEFAULT,
  steps,
  timeout = WORKFLOW_TIMEOUT_DEFAULT
}) => {
  const proxy = proxyActivities({
    retry: { initialInterval: interval, maximumAttempts: retry },
    startToCloseTimeout: timeout
  });
  const isParallel = execution === WORKFLOW_EXECUTION.PARALLEL;
  return async (workflowParams, workflowContext) => {
    const { workflowId } = workflowInfo();
    const executions = steps(workflowParams, workflowContext).map((v) => {
      const { context, name, params, type = WORKFLOW_STEP_TYPE.TASK } = v;
      const contextF = { ...workflowContext, ...context, workflowId };
      const runnable = (() => {
        switch (type) {
          case WORKFLOW_STEP_TYPE.TASK: {
            const task = proxy[name];
            if (!task) {
              throw new NotFoundError(name);
            }
            return async () => task(params, contextF);
          }
          case WORKFLOW_STEP_TYPE.WORKFLOW: {
            return async () => (isParallel ? startChild : executeChild)(name, { args: [params, contextF] });
          }
        }
      })();
      return async () => runnable?.();
    });
    try {
      const result = await (isParallel ? Promise.all(executions.map((v) => v())) : mapSequence(executions));
      await proxy[STATUS_UPDATE]({ id: workflowId, type: LOG_MESSAGE_TYPE.SUCCESS });
      return result;
    } catch (e) {
      await proxy[STATUS_UPDATE]({ id: workflowId, type: LOG_MESSAGE_TYPE.FAIL });
      throw e;
    }
  };
}, "_buildWorkflow");
const buildWorkflow = /* @__PURE__ */ __name((params) => _buildWorkflow(params), "buildWorkflow");
var ENVIRONMENT = /* @__PURE__ */ ((ENVIRONMENT2) => {
  ENVIRONMENT2["DEVELOPMENT"] = "development";
  ENVIRONMENT2["PRODUCTION"] = "production";
  ENVIRONMENT2["TEST"] = "test";
  return ENVIRONMENT2;
})(ENVIRONMENT || {});
var PLATFORM = /* @__PURE__ */ ((PLATFORM2) => {
  PLATFORM2["ANDROID"] = "android";
  PLATFORM2["BASE"] = "base";
  PLATFORM2["IOS"] = "ios";
  PLATFORM2["NODE"] = "node";
  PLATFORM2["PYTHON"] = "python";
  PLATFORM2["WEB"] = "web";
  return PLATFORM2;
})(PLATFORM || {});
const EXECUTE_PARALLEL = "executeParallel";
const webDev$1 = {
  context: {
    overrrides: {
      ENV_PLATFORM: PLATFORM.WEB
    }
  },
  steps: /* @__PURE__ */ __name(({ name }, context) => [
    {
      name: EXECUTE_PARALLEL,
      params: {
        commands: [
          `run serverDev --app=@service/${name} --pathname=src/index.ts`,
          `run serverDev --app=@app/web-${name} --pathname=src/index.ts`
        ]
      }
    }
  ], "steps")
};
const webDev = buildWorkflow(webDev$1);
const START = "start";
const orchestratorRun$1 = {
  context: {
    environment: ENVIRONMENT.DEVELOPMENT
  },
  steps: /* @__PURE__ */ __name(() => [{ name: START, params: { command: "temporal server start-dev" } }], "steps")
};
const orchestratorRun = buildWorkflow(orchestratorRun$1);
const CONTAINER_BUILD = "containerBuild";
const CONTAINER_PUBLISH = "containerPublish";
const children = /* @__PURE__ */ __name((...[from, options]) => {
  const root = `/${normalize(from)}`;
  return readdirSync(root, { withFileTypes: true }).map((directory) => {
    const fullPath = join(root, directory.name);
    const stat = statSync(fullPath);
    return {
      fullPath,
      isDirectory: directory.isDirectory(),
      lastUpdated: new Date(stat.mtime.getTime()),
      name: directory.name
    };
  }).filter(
    ({ isDirectory: isDirectoryF, name }) => !name.startsWith(".") && (options?.isDirectory === void 0 || options?.isDirectory === isDirectoryF)
  );
}, "children");
const _getRoot = /* @__PURE__ */ __name(() => appRootPath.path, "_getRoot");
const getRoot = /* @__PURE__ */ __name(() => _getRoot(), "getRoot");
const filterNil = /* @__PURE__ */ __name((params) => params?.filter(Boolean), "filterNil");
const joinPaths = /* @__PURE__ */ __name((...[paths, options]) => {
  let path = join(...filterNil(paths));
  options?.extension && (path = `${path}.${trimStart(options.extension, ".")}`);
  return path;
}, "joinPaths");
const fromRoot = /* @__PURE__ */ __name((...paths) => joinPaths([getRoot(), ...paths]), "fromRoot");
const fromPackages = /* @__PURE__ */ __name((...paths) => fromRoot("packages", ...paths), "fromPackages");
const fromWorking = /* @__PURE__ */ __name((...paths) => joinPaths([process.cwd(), ...paths]), "fromWorking");
const packageInfo = /* @__PURE__ */ __name((dirname) => {
  const from = dirname ?? fromWorking();
  return JSON.parse(readFileSync(joinPaths([from, "package.json"])).toString());
}, "packageInfo");
const appPrompt = /* @__PURE__ */ __name((params) => {
  const options = filterNil(
    children(fromPackages()).map((v) => {
      try {
        const { name } = packageInfo(v.fullPath);
        return { id: name ?? "", label: name };
      } catch {
        return null;
      }
    })
  );
  return { key: "app", options };
}, "appPrompt");
const SERVER_BUILD = "serverBuild";
const serverPublish$1 = {
  prompts: [appPrompt()],
  steps: /* @__PURE__ */ __name((params, context) => [
    {
      context: { ...context, app: params.app },
      name: SERVER_BUILD,
      type: WORKFLOW_STEP_TYPE.WORKFLOW
    },
    {
      context: { ...context, app: params.app },
      name: CONTAINER_BUILD,
      params: { dockerfilename: "Dockerfile.server", image: `${params.app}-server` }
    },
    {
      context: { ...context, app: params.app },
      name: CONTAINER_PUBLISH,
      params: { dockerfilename: "Dockerfile.server", image: `${params.app}-server` }
    }
  ], "steps")
};
const serverPublish = buildWorkflow(serverPublish$1);
const NODE_DEV = "nodeDev";
const serverDev$1 = {
  prompts: [appPrompt()],
  steps: /* @__PURE__ */ __name(({ app, pathname }, context) => [
    {
      context: { ...context, app },
      name: NODE_DEV,
      params: { pathname }
    }
  ], "steps")
};
const serverDev = buildWorkflow(serverDev$1);
const NODE_BUILD = "nodeBuild";
const serverBuild$1 = {
  steps: /* @__PURE__ */ __name(({ entryFiles = "src/index.ts", format, outDirname, watch }, context) => [
    {
      context,
      name: NODE_BUILD,
      params: {
        entryFiles,
        format,
        outDirname,
        watch
      }
    }
  ], "steps")
};
const serverBuild = buildWorkflow(serverBuild$1);
const BUILD_LINT = "buildLint";
const BUILD_TYPESCRIPT = "buildTypescript";
const buildConfig$1 = {
  steps: /* @__PURE__ */ __name(() => [{ name: BUILD_LINT }, { name: BUILD_TYPESCRIPT }], "steps")
};
const buildConfig = buildWorkflow(buildConfig$1);
const PING_TASK = "pingTask";
const pingWorkflow$1 = {
  steps: /* @__PURE__ */ __name((params, context) => [{ name: PING_TASK, params }], "steps")
};
const pingWorkflow = buildWorkflow(pingWorkflow$1);
export {
  buildConfig,
  orchestratorRun,
  pingWorkflow,
  serverBuild,
  serverDev,
  serverPublish,
  webDev
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ya2Zsb3dzLmpzIiwic291cmNlcyI6WyIuLi9wYWNrYWdlcy9saWItbW9kZWwtanMvc3JjL2xvZ2dpbmcvTG9nTWVzc2FnZS9Mb2dNZXNzYWdlLmNvbnN0YW50cy50cyIsIi4uL3BhY2thZ2VzL2xpYi1tb2RlbC1qcy9zcmMvb3JjaGVzdHJhdG9yL1dvcmtmbG93L1dvcmtmbG93LmNvbnN0YW50cy50cyIsIi4uL3BhY2thZ2VzL2xpYi1tb2RlbC1qcy9zcmMvb3JjaGVzdHJhdG9yL1dvcmtmbG93U3RlcC9Xb3JrZmxvd1N0ZXAuY29uc3RhbnRzLnRzIiwiLi4vcGFja2FnZXMvbGliLXNoYXJlZC1qcy9zcmMvY29yZS9lcnJvcnMvTm90Rm91bmRFcnJvci9Ob3RGb3VuZEVycm9yLnRzIiwiLi4vcGFja2FnZXMvbGliLXNoYXJlZC1qcy9zcmMvY29yZS91dGlscy9tYXBTZXF1ZW5jZS9tYXBTZXF1ZW5jZS50cyIsIi4uL3BhY2thZ2VzL3Rvb2wtdGFzay1qcy9zcmMvY29yZS90YXNrcy9zdGF0dXNVcGRhdGUvc3RhdHVzVXBkYXRlLmNvbnN0YW50cy50cyIsIi4uL3BhY2thZ2VzL3Rvb2wtdGFzay1qcy9zcmMvb3JjaGVzdHJhdG9yL3V0aWxzL2J1aWxkV29ya2Zsb3cvYnVpbGRXb3JrZmxvdy5jb25zdGFudHMudHMiLCIuLi9wYWNrYWdlcy90b29sLXRhc2stanMvc3JjL29yY2hlc3RyYXRvci91dGlscy9idWlsZFdvcmtmbG93L19idWlsZFdvcmtmbG93LnRzIiwiLi4vcGFja2FnZXMvdG9vbC10YXNrLWpzL3NyYy9vcmNoZXN0cmF0b3IvdXRpbHMvYnVpbGRXb3JrZmxvdy9idWlsZFdvcmtmbG93LnRzIiwiLi4vcGFja2FnZXMvbGliLXNoYXJlZC1qcy9zcmMvZW52aXJvbm1lbnQvZW52aXJvbm1lbnQuY29uc3RhbnRzLnRzIiwiLi4vcGFja2FnZXMvbGliLXNoYXJlZC1qcy9zcmMvcGxhdGZvcm0vcGxhdGZvcm0uY29uc3RhbnRzLnRzIiwiLi4vcGFja2FnZXMvdG9vbC10YXNrLWpzL3NyYy9jb3JlL3Rhc2tzL2V4ZWN1dGVQYXJhbGxlbC9leGVjdXRlUGFyYWxsZWwuY29uc3RhbnRzLnRzIiwiLi4vcGFja2FnZXMvdG9vbC10YXNrLWpzL3NyYy93ZWIvd29ya2Zsb3dzL3dlYkRldi93ZWJEZXYudHMiLCIuLi9wYWNrYWdlcy90b29sLXRhc2stanMvc3JjL3dlYi93b3JrZmxvd3Mvd2ViRGV2L3dlYkRldi53b3JrZmxvdy50cyIsIi4uL3BhY2thZ2VzL3Rvb2wtdGFzay1qcy9zcmMvY29yZS90YXNrcy9zdGFydC9zdGFydC5jb25zdGFudHMudHMiLCIuLi9wYWNrYWdlcy90b29sLXRhc2stanMvc3JjL29yY2hlc3RyYXRvci93b3JrZmxvd3Mvb3JjaGVzdHJhdG9yUnVuL29yY2hlc3RyYXRvclJ1bi50cyIsIi4uL3BhY2thZ2VzL3Rvb2wtdGFzay1qcy9zcmMvb3JjaGVzdHJhdG9yL3dvcmtmbG93cy9vcmNoZXN0cmF0b3JSdW4vb3JjaGVzdHJhdG9yUnVuLndvcmtmbG93LnRzIiwiLi4vcGFja2FnZXMvdG9vbC10YXNrLWpzL3NyYy9jb250YWluZXIvdGFza3MvY29udGFpbmVyQnVpbGQvY29udGFpbmVyQnVpbGQuY29uc3RhbnRzLnRzIiwiLi4vcGFja2FnZXMvdG9vbC10YXNrLWpzL3NyYy9jb250YWluZXIvdGFza3MvY29udGFpbmVyUHVibGlzaC9jb250YWluZXJQdWJsaXNoLmNvbnN0YW50cy50cyIsIi4uL3BhY2thZ2VzL2xpYi1iYWNrZW5kLWpzL3NyYy9maWxlL3V0aWxzL2NoaWxkcmVuL2NoaWxkcmVuLnRzIiwiLi4vcGFja2FnZXMvbGliLWJhY2tlbmQtanMvc3JjL2ZpbGUvdXRpbHMvZ2V0Um9vdC9fZ2V0Um9vdC50cyIsIi4uL3BhY2thZ2VzL2xpYi1iYWNrZW5kLWpzL3NyYy9maWxlL3V0aWxzL2dldFJvb3QvZ2V0Um9vdC50cyIsIi4uL3BhY2thZ2VzL2xpYi1zaGFyZWQtanMvc3JjL2NvcmUvdXRpbHMvZmlsdGVyTmlsL2ZpbHRlck5pbC50cyIsIi4uL3BhY2thZ2VzL2xpYi1iYWNrZW5kLWpzL3NyYy9maWxlL3V0aWxzL2pvaW5QYXRocy9qb2luUGF0aHMudHMiLCIuLi9wYWNrYWdlcy9saWItYmFja2VuZC1qcy9zcmMvZmlsZS91dGlscy9mcm9tUm9vdC9mcm9tUm9vdC50cyIsIi4uL3BhY2thZ2VzL2xpYi1iYWNrZW5kLWpzL3NyYy9maWxlL3V0aWxzL2Zyb21QYWNrYWdlcy9mcm9tUGFja2FnZXMudHMiLCIuLi9wYWNrYWdlcy9saWItYmFja2VuZC1qcy9zcmMvZmlsZS91dGlscy9mcm9tV29ya2luZy9mcm9tV29ya2luZy50cyIsIi4uL3BhY2thZ2VzL2xpYi1zaGFyZWQtanMvc3JjL2NvcmUvdXRpbHMvcGFja2FnZUluZm8vcGFja2FnZUluZm8udHMiLCIuLi9wYWNrYWdlcy90b29sLXRhc2stanMvc3JjL2NvcmUvdXRpbHMvYXBwUHJvbXB0L2FwcFByb21wdC50cyIsIi4uL3BhY2thZ2VzL3Rvb2wtdGFzay1qcy9zcmMvbm9kZS93b3JrZmxvd3Mvc2VydmVyQnVpbGQvc2VydmVyQnVpbGQuY29uc3RhbnRzLnRzIiwiLi4vcGFja2FnZXMvdG9vbC10YXNrLWpzL3NyYy9ub2RlL3dvcmtmbG93cy9zZXJ2ZXJQdWJsaXNoL3NlcnZlclB1Ymxpc2gudHMiLCIuLi9wYWNrYWdlcy90b29sLXRhc2stanMvc3JjL25vZGUvd29ya2Zsb3dzL3NlcnZlclB1Ymxpc2gvc2VydmVyUHVibGlzaC53b3JrZmxvdy50cyIsIi4uL3BhY2thZ2VzL3Rvb2wtdGFzay1qcy9zcmMvbm9kZS90YXNrcy9ub2RlRGV2L25vZGVEZXYuY29uc3RhbnRzLnRzIiwiLi4vcGFja2FnZXMvdG9vbC10YXNrLWpzL3NyYy9ub2RlL3dvcmtmbG93cy9zZXJ2ZXJEZXYvc2VydmVyRGV2LnRzIiwiLi4vcGFja2FnZXMvdG9vbC10YXNrLWpzL3NyYy9ub2RlL3dvcmtmbG93cy9zZXJ2ZXJEZXYvc2VydmVyRGV2LndvcmtmbG93LnRzIiwiLi4vcGFja2FnZXMvdG9vbC10YXNrLWpzL3NyYy9ub2RlL3Rhc2tzL25vZGVCdWlsZC9ub2RlQnVpbGQuY29uc3RhbnRzLnRzIiwiLi4vcGFja2FnZXMvdG9vbC10YXNrLWpzL3NyYy9ub2RlL3dvcmtmbG93cy9zZXJ2ZXJCdWlsZC9zZXJ2ZXJCdWlsZC50cyIsIi4uL3BhY2thZ2VzL3Rvb2wtdGFzay1qcy9zcmMvbm9kZS93b3JrZmxvd3Mvc2VydmVyQnVpbGQvc2VydmVyQnVpbGQud29ya2Zsb3cudHMiLCIuLi9wYWNrYWdlcy90b29sLXRhc2stanMvc3JjL25vZGUvdGFza3MvYnVpbGRMaW50L2J1aWxkTGludC5jb25zdGFudHMudHMiLCIuLi9wYWNrYWdlcy90b29sLXRhc2stanMvc3JjL25vZGUvdGFza3MvYnVpbGRUeXBlc2NyaXB0L2J1aWxkVHlwZXNjcmlwdC5jb25zdGFudHMudHMiLCIuLi9wYWNrYWdlcy90b29sLXRhc2stanMvc3JjL25vZGUvd29ya2Zsb3dzL2J1aWxkQ29uZmlnL2J1aWxkQ29uZmlnLnRzIiwiLi4vcGFja2FnZXMvdG9vbC10YXNrLWpzL3NyYy9ub2RlL3dvcmtmbG93cy9idWlsZENvbmZpZy9idWlsZENvbmZpZy53b3JrZmxvdy50cyIsIi4uL3BhY2thZ2VzL3Rvb2wtdGFzay1qcy9zcmMvZGV2L3Rhc2tzL3BpbmdUYXNrL3BpbmdUYXNrLmNvbnN0YW50cy50cyIsIi4uL3BhY2thZ2VzL3Rvb2wtdGFzay1qcy9zcmMvZGV2L3dvcmtmbG93cy9waW5nV29ya2Zsb3cvcGluZ1dvcmtmbG93LnRzIiwiLi4vcGFja2FnZXMvdG9vbC10YXNrLWpzL3NyYy9kZXYvd29ya2Zsb3dzL3BpbmdXb3JrZmxvdy9waW5nV29ya2Zsb3cud29ya2Zsb3cudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IExPR19NRVNTQUdFX1JFU09VUkNFX05BTUUgPSAnTG9nTWVzc2FnZSc7XG5cbmV4cG9ydCBlbnVtIExPR19NRVNTQUdFX1RZUEUge1xuICBGQUlMID0gJ2ZhaWwnLFxuICBTVUNDRVNTID0gJ3N1Y2Nlc3MnLFxufVxuIiwiZXhwb3J0IGNvbnN0IFdPUktGTE9XX1JFU09VUkNFX05BTUUgPSAnV29ya2Zsb3cnO1xuXG5leHBvcnQgZW51bSBXT1JLRkxPV19FWEVDVVRJT04ge1xuICBQQVJBTExFTCA9ICdwYXJhbGxlbCcsXG4gIFNFUVVFTlRJQUwgPSAnc2VxdWVudGlhbCcsXG59XG4iLCJleHBvcnQgY29uc3QgV09SS0ZMT1dfU1RFUF9SRVNPVVJDRV9OQU1FID0gJ1dvcmtmbG93U3RlcCc7XG5cbmV4cG9ydCBlbnVtIFdPUktGTE9XX1NURVBfVFlQRSB7XG4gIFRBU0sgPSAndGFzaycsXG4gIFdPUktGTE9XID0gJ3dvcmtmbG93Jyxcbn1cbiIsImV4cG9ydCBjbGFzcyBOb3RGb3VuZEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlPzogc3RyaW5nKSB7XG4gICAgc3VwZXIoYG5vdCBmb3VuZDogJHttZXNzYWdlfWApO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICB0eXBlIE1hcFNlcXVlbmNlTW9kZWwsXG4gIHR5cGUgTWFwU2VxdWVuY2VQYXJhbXNNb2RlbCxcbn0gZnJvbSAnQGxpYi9zaGFyZWQvY29yZS91dGlscy9tYXBTZXF1ZW5jZS9tYXBTZXF1ZW5jZS5tb2RlbHMnO1xuXG5leHBvcnQgY29uc3QgbWFwU2VxdWVuY2UgPSBhc3luYyA8VFR5cGUgZXh0ZW5kcyB1bmtub3duPihcbiAgcGFyYW1zOiBNYXBTZXF1ZW5jZVBhcmFtc01vZGVsPFRUeXBlPixcbik6IFByb21pc2U8TWFwU2VxdWVuY2VNb2RlbDxUVHlwZT4+ID0+IHtcbiAgaWYgKHBhcmFtcy5sZW5ndGggPT09IDApIHJldHVybiBbXTtcbiAgY29uc3QgW2ZpcnN0LCAuLi5yZXN0XSA9IHBhcmFtcztcbiAgcmV0dXJuIFthd2FpdCBmaXJzdCgpLCAuLi4oYXdhaXQgbWFwU2VxdWVuY2UocmVzdCkpXTtcbn07XG4iLCJleHBvcnQgY29uc3QgU1RBVFVTX1VQREFURSA9ICdzdGF0dXNVcGRhdGUnO1xuIiwiZXhwb3J0IGNvbnN0IFdPUktGTE9XX1JFVFJZX0RFRkFVTFQgPSAzO1xuXG5leHBvcnQgY29uc3QgV09SS0ZMT1dfSU5URVJWQUxfREVGQVVMVCA9IDEwMDA7XG5cbmV4cG9ydCBjb25zdCBXT1JLRkxPV19USU1FT1VUX0RFRkFVTFQgPSA2MGUzO1xuIiwiaW1wb3J0IHsgTE9HX01FU1NBR0VfVFlQRSB9IGZyb20gJ0BsaWIvbW9kZWwvbG9nZ2luZy9Mb2dNZXNzYWdlL0xvZ01lc3NhZ2UuY29uc3RhbnRzJztcbmltcG9ydCB7IHR5cGUgRXhlY3V0aW9uQ29udGV4dE1vZGVsIH0gZnJvbSAnQGxpYi9tb2RlbC9vcmNoZXN0cmF0b3IvRXhlY3V0aW9uQ29udGV4dC9FeGVjdXRpb25Db250ZXh0Lm1vZGVscyc7XG5pbXBvcnQgeyBXT1JLRkxPV19FWEVDVVRJT04gfSBmcm9tICdAbGliL21vZGVsL29yY2hlc3RyYXRvci9Xb3JrZmxvdy9Xb3JrZmxvdy5jb25zdGFudHMnO1xuaW1wb3J0IHsgV09SS0ZMT1dfU1RFUF9UWVBFIH0gZnJvbSAnQGxpYi9tb2RlbC9vcmNoZXN0cmF0b3IvV29ya2Zsb3dTdGVwL1dvcmtmbG93U3RlcC5jb25zdGFudHMnO1xuaW1wb3J0IHsgTm90Rm91bmRFcnJvciB9IGZyb20gJ0BsaWIvc2hhcmVkL2NvcmUvZXJyb3JzL05vdEZvdW5kRXJyb3IvTm90Rm91bmRFcnJvcic7XG5pbXBvcnQgeyBtYXBTZXF1ZW5jZSB9IGZyb20gJ0BsaWIvc2hhcmVkL2NvcmUvdXRpbHMvbWFwU2VxdWVuY2UvbWFwU2VxdWVuY2UnO1xuaW1wb3J0IHsgZXhlY3V0ZUNoaWxkLCBwcm94eUFjdGl2aXRpZXMsIHN0YXJ0Q2hpbGQsIHdvcmtmbG93SW5mbyB9IGZyb20gJ0B0ZW1wb3JhbGlvL3dvcmtmbG93JztcbmltcG9ydCB7IFNUQVRVU19VUERBVEUgfSBmcm9tICdAdG9vbC90YXNrL2NvcmUvdGFza3Mvc3RhdHVzVXBkYXRlL3N0YXR1c1VwZGF0ZS5jb25zdGFudHMnO1xuaW1wb3J0IHtcbiAgdHlwZSBfQnVpbGRXb3JrZmxvd01vZGVsLFxuICB0eXBlIF9CdWlsZFdvcmtmbG93UGFyYW1zTW9kZWwsXG59IGZyb20gJ0B0b29sL3Rhc2svb3JjaGVzdHJhdG9yL3V0aWxzL2J1aWxkV29ya2Zsb3cvX2J1aWxkV29ya2Zsb3cubW9kZWxzJztcbmltcG9ydCB7XG4gIFdPUktGTE9XX0lOVEVSVkFMX0RFRkFVTFQsXG4gIFdPUktGTE9XX1JFVFJZX0RFRkFVTFQsXG4gIFdPUktGTE9XX1RJTUVPVVRfREVGQVVMVCxcbn0gZnJvbSAnQHRvb2wvdGFzay9vcmNoZXN0cmF0b3IvdXRpbHMvYnVpbGRXb3JrZmxvdy9idWlsZFdvcmtmbG93LmNvbnN0YW50cyc7XG5cbmV4cG9ydCBjb25zdCBfYnVpbGRXb3JrZmxvdyA9IDxcbiAgVFBhcmFtcyA9IHZvaWQsXG4gIFRSZXN1bHQgPSB2b2lkLFxuICBUU3RlcHMgZXh0ZW5kcyBBcnJheTx1bmtub3duPiA9IEFycmF5PHVua25vd24+LFxuPih7XG4gIGV4ZWN1dGlvbiA9IFdPUktGTE9XX0VYRUNVVElPTi5TRVFVRU5USUFMLFxuICBpbnRlcnZhbCA9IFdPUktGTE9XX0lOVEVSVkFMX0RFRkFVTFQsXG4gIHJldHJ5ID0gV09SS0ZMT1dfUkVUUllfREVGQVVMVCxcbiAgc3RlcHMsXG4gIHRpbWVvdXQgPSBXT1JLRkxPV19USU1FT1VUX0RFRkFVTFQsXG59OiBfQnVpbGRXb3JrZmxvd1BhcmFtc01vZGVsPFRQYXJhbXMsIFRSZXN1bHQsIFRTdGVwcz4pOiBfQnVpbGRXb3JrZmxvd01vZGVsPFRQYXJhbXMsIFRSZXN1bHQ+ID0+IHtcbiAgY29uc3QgcHJveHkgPSBwcm94eUFjdGl2aXRpZXMoe1xuICAgIHJldHJ5OiB7IGluaXRpYWxJbnRlcnZhbDogaW50ZXJ2YWwsIG1heGltdW1BdHRlbXB0czogcmV0cnkgfSxcbiAgICBzdGFydFRvQ2xvc2VUaW1lb3V0OiB0aW1lb3V0LFxuICB9KTtcbiAgY29uc3QgaXNQYXJhbGxlbCA9IGV4ZWN1dGlvbiA9PT0gV09SS0ZMT1dfRVhFQ1VUSU9OLlBBUkFMTEVMO1xuICByZXR1cm4gYXN5bmMgKHdvcmtmbG93UGFyYW1zLCB3b3JrZmxvd0NvbnRleHQpID0+IHtcbiAgICBjb25zdCB7IHdvcmtmbG93SWQgfSA9IHdvcmtmbG93SW5mbygpO1xuICAgIGNvbnN0IGV4ZWN1dGlvbnMgPSBzdGVwcyh3b3JrZmxvd1BhcmFtcywgd29ya2Zsb3dDb250ZXh0KS5tYXAoKHYpID0+IHtcbiAgICAgIGNvbnN0IHsgY29udGV4dCwgbmFtZSwgcGFyYW1zLCB0eXBlID0gV09SS0ZMT1dfU1RFUF9UWVBFLlRBU0sgfSA9IHY7XG4gICAgICBjb25zdCBjb250ZXh0RjogRXhlY3V0aW9uQ29udGV4dE1vZGVsID0geyAuLi53b3JrZmxvd0NvbnRleHQsIC4uLmNvbnRleHQsIHdvcmtmbG93SWQgfTtcbiAgICAgIGNvbnN0IHJ1bm5hYmxlID0gKCgpID0+IHtcbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgY2FzZSBXT1JLRkxPV19TVEVQX1RZUEUuVEFTSzoge1xuICAgICAgICAgICAgY29uc3QgdGFzayA9IHByb3h5W25hbWVdO1xuICAgICAgICAgICAgaWYgKCF0YXNrKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEVycm9yKG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGFzeW5jICgpID0+IHRhc2socGFyYW1zLCBjb250ZXh0Rik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgV09SS0ZMT1dfU1RFUF9UWVBFLldPUktGTE9XOiB7XG4gICAgICAgICAgICByZXR1cm4gYXN5bmMgKCkgPT5cbiAgICAgICAgICAgICAgKGlzUGFyYWxsZWwgPyBzdGFydENoaWxkIDogZXhlY3V0ZUNoaWxkKShuYW1lLCB7IGFyZ3M6IFtwYXJhbXMsIGNvbnRleHRGXSB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pKCk7XG4gICAgICByZXR1cm4gYXN5bmMgKCkgPT4gcnVubmFibGU/LigpO1xuICAgIH0pO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSAoYXdhaXQgKGlzUGFyYWxsZWxcbiAgICAgICAgPyBQcm9taXNlLmFsbChleGVjdXRpb25zLm1hcCgodikgPT4gdigpKSlcbiAgICAgICAgOiBtYXBTZXF1ZW5jZShleGVjdXRpb25zKSkpIGFzIFRSZXN1bHQ7XG4gICAgICBhd2FpdCBwcm94eVtTVEFUVVNfVVBEQVRFXSh7IGlkOiB3b3JrZmxvd0lkLCB0eXBlOiBMT0dfTUVTU0FHRV9UWVBFLlNVQ0NFU1MgfSk7XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGF3YWl0IHByb3h5W1NUQVRVU19VUERBVEVdKHsgaWQ6IHdvcmtmbG93SWQsIHR5cGU6IExPR19NRVNTQUdFX1RZUEUuRkFJTCB9KTtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9O1xufTtcbiIsImltcG9ydCB7IF9idWlsZFdvcmtmbG93IH0gZnJvbSAnQHRvb2wvdGFzay9vcmNoZXN0cmF0b3IvdXRpbHMvYnVpbGRXb3JrZmxvdy9fYnVpbGRXb3JrZmxvdyc7XG5pbXBvcnQge1xuICB0eXBlIEJ1aWxkV29ya2Zsb3dNb2RlbCxcbiAgdHlwZSBCdWlsZFdvcmtmbG93UGFyYW1zTW9kZWwsXG59IGZyb20gJ0B0b29sL3Rhc2svb3JjaGVzdHJhdG9yL3V0aWxzL2J1aWxkV29ya2Zsb3cvYnVpbGRXb3JrZmxvdy5tb2RlbHMnO1xuXG5leHBvcnQgY29uc3QgYnVpbGRXb3JrZmxvdyA9IDxcbiAgVFBhcmFtcyA9IHZvaWQsXG4gIFRSZXN1bHQgPSB2b2lkLFxuICBUU3RlcHMgZXh0ZW5kcyBBcnJheTx1bmtub3duPiA9IEFycmF5PHVua25vd24+LFxuPihcbiAgcGFyYW1zOiBCdWlsZFdvcmtmbG93UGFyYW1zTW9kZWw8VFBhcmFtcywgVFJlc3VsdCwgVFN0ZXBzPixcbik6IEJ1aWxkV29ya2Zsb3dNb2RlbDxUUGFyYW1zLCBUUmVzdWx0PiA9PiBfYnVpbGRXb3JrZmxvdyhwYXJhbXMpO1xuIiwiZXhwb3J0IGVudW0gRU5WSVJPTk1FTlQge1xuICBERVZFTE9QTUVOVCA9ICdkZXZlbG9wbWVudCcsXG4gIFBST0RVQ1RJT04gPSAncHJvZHVjdGlvbicsXG4gIFRFU1QgPSAndGVzdCcsXG59XG5cbmV4cG9ydCBlbnVtIFJVTlRJTUUge1xuICBBV1NfTEFNQkRBID0gJ2xhbWJkYScsXG4gIENPTlRBSU5FUiA9ICdjb250YWluZXInLFxuICBPU1ggPSAnb3N4Jyxcbn1cbiIsImV4cG9ydCBlbnVtIFBMQVRGT1JNIHtcbiAgQU5EUk9JRCA9ICdhbmRyb2lkJyxcbiAgQkFTRSA9ICdiYXNlJyxcbiAgSU9TID0gJ2lvcycsXG4gIE5PREUgPSAnbm9kZScsXG4gIFBZVEhPTiA9ICdweXRob24nLFxuICBXRUIgPSAnd2ViJyxcbn1cbiIsImV4cG9ydCBjb25zdCBFWEVDVVRFX1BBUkFMTEVMID0gJ2V4ZWN1dGVQYXJhbGxlbCc7XG5cbmV4cG9ydCBlbnVtIFBBUkFMTEVMX0NPTkRJVElPTiB7XG4gIEFMTCA9ICdhbGwnLFxuICBGSVJTVCA9ICdmaXJzdCcsXG4gIExBU1QgPSAnbGFzdCcsXG59XG4iLCJpbXBvcnQgeyBFTlZJUk9OTUVOVCB9IGZyb20gJ0BsaWIvc2hhcmVkL2Vudmlyb25tZW50L2Vudmlyb25tZW50LmNvbnN0YW50cyc7XG5pbXBvcnQgeyBQTEFURk9STSB9IGZyb20gJ0BsaWIvc2hhcmVkL3BsYXRmb3JtL3BsYXRmb3JtLmNvbnN0YW50cyc7XG5pbXBvcnQgeyBFWEVDVVRFX1BBUkFMTEVMIH0gZnJvbSAnQHRvb2wvdGFzay9jb3JlL3Rhc2tzL2V4ZWN1dGVQYXJhbGxlbC9leGVjdXRlUGFyYWxsZWwuY29uc3RhbnRzJztcbmltcG9ydCB7IHR5cGUgRXhlY3V0ZVBhcmFsbGVsUGFyYW1zTW9kZWwgfSBmcm9tICdAdG9vbC90YXNrL2NvcmUvdGFza3MvZXhlY3V0ZVBhcmFsbGVsL2V4ZWN1dGVQYXJhbGxlbC5tb2RlbHMnO1xuaW1wb3J0IHsgdHlwZSBCdWlsZFdvcmtmbG93UGFyYW1zTW9kZWwgfSBmcm9tICdAdG9vbC90YXNrL29yY2hlc3RyYXRvci91dGlscy9idWlsZFdvcmtmbG93L2J1aWxkV29ya2Zsb3cubW9kZWxzJztcbmltcG9ydCB7IFdFQl9ERVYgfSBmcm9tICdAdG9vbC90YXNrL3dlYi93b3JrZmxvd3Mvd2ViRGV2L3dlYkRldi5jb25zdGFudHMnO1xuaW1wb3J0IHsgdHlwZSBXZWJEZXZQYXJhbXNNb2RlbCB9IGZyb20gJ0B0b29sL3Rhc2svd2ViL3dvcmtmbG93cy93ZWJEZXYvd2ViRGV2Lm1vZGVscyc7XG5cbmV4cG9ydCBjb25zdCB3ZWJEZXY6IEJ1aWxkV29ya2Zsb3dQYXJhbXNNb2RlbDxcbiAgV2ViRGV2UGFyYW1zTW9kZWwsXG4gIHZvaWQsXG4gIFtFeGVjdXRlUGFyYWxsZWxQYXJhbXNNb2RlbF1cbj4gPSB7XG4gIGNvbnRleHQ6IHtcbiAgICBlbnZpcm9ubWVudDogRU5WSVJPTk1FTlQuREVWRUxPUE1FTlQsXG4gICAgb3ZlcnJyaWRlczoge1xuICAgICAgRU5WX1BMQVRGT1JNOiBQTEFURk9STS5XRUIsXG4gICAgfSxcbiAgfSxcblxuICBuYW1lOiBXRUJfREVWLFxuXG4gIHN0ZXBzOiAoeyBuYW1lIH0sIGNvbnRleHQpID0+IFtcbiAgICB7XG4gICAgICBuYW1lOiBFWEVDVVRFX1BBUkFMTEVMLFxuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIGNvbW1hbmRzOiBbXG4gICAgICAgICAgYHJ1biBzZXJ2ZXJEZXYgLS1hcHA9QHNlcnZpY2UvJHtuYW1lfSAtLXBhdGhuYW1lPXNyYy9pbmRleC50c2AsXG4gICAgICAgICAgYHJ1biBzZXJ2ZXJEZXYgLS1hcHA9QGFwcC93ZWItJHtuYW1lfSAtLXBhdGhuYW1lPXNyYy9pbmRleC50c2AsXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIH0sXG4gIF0sXG59O1xuIiwiaW1wb3J0IHsgYnVpbGRXb3JrZmxvdyB9IGZyb20gJ0B0b29sL3Rhc2svb3JjaGVzdHJhdG9yL3V0aWxzL2J1aWxkV29ya2Zsb3cvYnVpbGRXb3JrZmxvdyc7XG5pbXBvcnQgeyB3ZWJEZXYgYXMgcGFyYW1zIH0gZnJvbSAnQHRvb2wvdGFzay93ZWIvd29ya2Zsb3dzL3dlYkRldi93ZWJEZXYnO1xuXG5leHBvcnQgY29uc3Qgd2ViRGV2ID0gYnVpbGRXb3JrZmxvdyhwYXJhbXMpO1xuIiwiZXhwb3J0IGNvbnN0IFNUQVJUID0gJ3N0YXJ0JztcbiIsImltcG9ydCB7IEVOVklST05NRU5UIH0gZnJvbSAnQGxpYi9zaGFyZWQvZW52aXJvbm1lbnQvZW52aXJvbm1lbnQuY29uc3RhbnRzJztcbmltcG9ydCB7IFNUQVJUIH0gZnJvbSAnQHRvb2wvdGFzay9jb3JlL3Rhc2tzL3N0YXJ0L3N0YXJ0LmNvbnN0YW50cyc7XG5pbXBvcnQgeyB0eXBlIFN0YXJ0UGFyYW1zTW9kZWwgfSBmcm9tICdAdG9vbC90YXNrL2NvcmUvdGFza3Mvc3RhcnQvc3RhcnQubW9kZWxzJztcbmltcG9ydCB7IHR5cGUgQnVpbGRXb3JrZmxvd1BhcmFtc01vZGVsIH0gZnJvbSAnQHRvb2wvdGFzay9vcmNoZXN0cmF0b3IvdXRpbHMvYnVpbGRXb3JrZmxvdy9idWlsZFdvcmtmbG93Lm1vZGVscyc7XG5pbXBvcnQgeyBPUkNIRVNUUkFUT1JfUlVOIH0gZnJvbSAnQHRvb2wvdGFzay9vcmNoZXN0cmF0b3Ivd29ya2Zsb3dzL29yY2hlc3RyYXRvclJ1bi9vcmNoZXN0cmF0b3JSdW4uY29uc3RhbnRzJztcbmltcG9ydCB7XG4gIHR5cGUgT3JjaGVzdHJhdG9yUnVuTW9kZWwsXG4gIHR5cGUgT3JjaGVzdHJhdG9yUnVuUGFyYW1zTW9kZWwsXG59IGZyb20gJ0B0b29sL3Rhc2svb3JjaGVzdHJhdG9yL3dvcmtmbG93cy9vcmNoZXN0cmF0b3JSdW4vb3JjaGVzdHJhdG9yUnVuLm1vZGVscyc7XG5cbmV4cG9ydCBjb25zdCBvcmNoZXN0cmF0b3JSdW46IEJ1aWxkV29ya2Zsb3dQYXJhbXNNb2RlbDxcbiAgT3JjaGVzdHJhdG9yUnVuUGFyYW1zTW9kZWwsXG4gIE9yY2hlc3RyYXRvclJ1bk1vZGVsLFxuICBbU3RhcnRQYXJhbXNNb2RlbF1cbj4gPSB7XG4gIGNvbnRleHQ6IHtcbiAgICBlbnZpcm9ubWVudDogRU5WSVJPTk1FTlQuREVWRUxPUE1FTlQsXG4gIH0sXG5cbiAgbmFtZTogT1JDSEVTVFJBVE9SX1JVTixcblxuICBzdGVwczogKCkgPT4gW3sgbmFtZTogU1RBUlQsIHBhcmFtczogeyBjb21tYW5kOiAndGVtcG9yYWwgc2VydmVyIHN0YXJ0LWRldicgfSB9XSxcbn07XG4iLCJpbXBvcnQgeyBidWlsZFdvcmtmbG93IH0gZnJvbSAnQHRvb2wvdGFzay9vcmNoZXN0cmF0b3IvdXRpbHMvYnVpbGRXb3JrZmxvdy9idWlsZFdvcmtmbG93JztcbmltcG9ydCB7IG9yY2hlc3RyYXRvclJ1biBhcyBwYXJhbXMgfSBmcm9tICdAdG9vbC90YXNrL29yY2hlc3RyYXRvci93b3JrZmxvd3Mvb3JjaGVzdHJhdG9yUnVuL29yY2hlc3RyYXRvclJ1bic7XG5cbmV4cG9ydCBjb25zdCBvcmNoZXN0cmF0b3JSdW4gPSBidWlsZFdvcmtmbG93KHBhcmFtcyk7XG4iLCJleHBvcnQgY29uc3QgQ09OVEFJTkVSX0JVSUxEID0gJ2NvbnRhaW5lckJ1aWxkJztcbiIsImV4cG9ydCBjb25zdCBDT05UQUlORVJfUFVCTElTSCA9ICdjb250YWluZXJQdWJsaXNoJztcbiIsImltcG9ydCB7XG4gIHR5cGUgQ2hpbGRyZW5Nb2RlbCxcbiAgdHlwZSBDaGlsZHJlblBhcmFtc01vZGVsLFxufSBmcm9tICdAbGliL2JhY2tlbmQvZmlsZS91dGlscy9jaGlsZHJlbi9jaGlsZHJlbi5tb2RlbHMnO1xuaW1wb3J0IHsgcmVhZGRpclN5bmMsIHN0YXRTeW5jIH0gZnJvbSAnZnMnO1xuaW1wb3J0IHsgam9pbiwgbm9ybWFsaXplIH0gZnJvbSAncGF0aCc7XG5cbmV4cG9ydCBjb25zdCBjaGlsZHJlbiA9ICguLi5bZnJvbSwgb3B0aW9uc106IENoaWxkcmVuUGFyYW1zTW9kZWwpOiBDaGlsZHJlbk1vZGVsID0+IHtcbiAgY29uc3Qgcm9vdCA9IGAvJHtub3JtYWxpemUoZnJvbSl9YDtcbiAgcmV0dXJuIHJlYWRkaXJTeW5jKHJvb3QsIHsgd2l0aEZpbGVUeXBlczogdHJ1ZSB9KVxuICAgIC5tYXAoKGRpcmVjdG9yeSkgPT4ge1xuICAgICAgY29uc3QgZnVsbFBhdGggPSBqb2luKHJvb3QsIGRpcmVjdG9yeS5uYW1lKTtcbiAgICAgIGNvbnN0IHN0YXQgPSBzdGF0U3luYyhmdWxsUGF0aCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBmdWxsUGF0aCxcbiAgICAgICAgaXNEaXJlY3Rvcnk6IGRpcmVjdG9yeS5pc0RpcmVjdG9yeSgpLFxuICAgICAgICBsYXN0VXBkYXRlZDogbmV3IERhdGUoc3RhdC5tdGltZS5nZXRUaW1lKCkpLFxuICAgICAgICBuYW1lOiBkaXJlY3RvcnkubmFtZSxcbiAgICAgIH07XG4gICAgfSlcbiAgICAuZmlsdGVyKFxuICAgICAgKHsgaXNEaXJlY3Rvcnk6IGlzRGlyZWN0b3J5RiwgbmFtZSB9KSA9PlxuICAgICAgICAhbmFtZS5zdGFydHNXaXRoKCcuJykgJiZcbiAgICAgICAgKG9wdGlvbnM/LmlzRGlyZWN0b3J5ID09PSB1bmRlZmluZWQgfHwgb3B0aW9ucz8uaXNEaXJlY3RvcnkgPT09IGlzRGlyZWN0b3J5RiksXG4gICAgKTtcbn07XG4iLCJpbXBvcnQgeyB0eXBlIF9HZXRSb290TW9kZWwgfSBmcm9tICdAbGliL2JhY2tlbmQvZmlsZS91dGlscy9nZXRSb290L19nZXRSb290Lm1vZGVscyc7XG5pbXBvcnQgYXBwUm9vdFBhdGggZnJvbSAnYXBwLXJvb3QtcGF0aCc7XG5cbmV4cG9ydCBjb25zdCBfZ2V0Um9vdCA9ICgpOiBfR2V0Um9vdE1vZGVsID0+IGFwcFJvb3RQYXRoLnBhdGg7XG4iLCJpbXBvcnQgeyBfZ2V0Um9vdCB9IGZyb20gJ0BsaWIvYmFja2VuZC9maWxlL3V0aWxzL2dldFJvb3QvX2dldFJvb3QnO1xuaW1wb3J0IHsgdHlwZSBHZXRSb290TW9kZWwgfSBmcm9tICdAbGliL2JhY2tlbmQvZmlsZS91dGlscy9nZXRSb290L2dldFJvb3QubW9kZWxzJztcblxuZXhwb3J0IGNvbnN0IGdldFJvb3QgPSAoKTogR2V0Um9vdE1vZGVsID0+IF9nZXRSb290KCk7XG4iLCJpbXBvcnQge1xuICB0eXBlIEZpbHRlck5pbE1vZGVsLFxuICB0eXBlIEZpbHRlck5pbFBhcmFtc01vZGVsLFxufSBmcm9tICdAbGliL3NoYXJlZC9jb3JlL3V0aWxzL2ZpbHRlck5pbC9maWx0ZXJOaWwubW9kZWxzJztcblxuZXhwb3J0IGNvbnN0IGZpbHRlck5pbCA9IDxUVHlwZSBleHRlbmRzIHVua25vd24+KFxuICBwYXJhbXM/OiBGaWx0ZXJOaWxQYXJhbXNNb2RlbDxUVHlwZT4sXG4pOiBGaWx0ZXJOaWxNb2RlbDxUVHlwZT4gPT4gcGFyYW1zPy5maWx0ZXIoQm9vbGVhbikgYXMgRmlsdGVyTmlsTW9kZWw8VFR5cGU+O1xuIiwiaW1wb3J0IHtcbiAgdHlwZSBKb2luUGF0aHNNb2RlbCxcbiAgdHlwZSBKb2luUGF0aHNQYXJhbXNNb2RlbCxcbn0gZnJvbSAnQGxpYi9iYWNrZW5kL2ZpbGUvdXRpbHMvam9pblBhdGhzL2pvaW5QYXRocy5tb2RlbHMnO1xuaW1wb3J0IHsgZmlsdGVyTmlsIH0gZnJvbSAnQGxpYi9zaGFyZWQvY29yZS91dGlscy9maWx0ZXJOaWwvZmlsdGVyTmlsJztcbmltcG9ydCB0cmltU3RhcnQgZnJvbSAnbG9kYXNoL3RyaW1TdGFydCc7XG5pbXBvcnQgeyBqb2luIH0gZnJvbSAncGF0aCc7XG5cbmV4cG9ydCBjb25zdCBqb2luUGF0aHMgPSAoLi4uW3BhdGhzLCBvcHRpb25zXTogSm9pblBhdGhzUGFyYW1zTW9kZWwpOiBKb2luUGF0aHNNb2RlbCA9PiB7XG4gIGxldCBwYXRoID0gam9pbiguLi5maWx0ZXJOaWwocGF0aHMpKTtcbiAgb3B0aW9ucz8uZXh0ZW5zaW9uICYmIChwYXRoID0gYCR7cGF0aH0uJHt0cmltU3RhcnQob3B0aW9ucy5leHRlbnNpb24sICcuJyl9YCk7XG4gIHJldHVybiBwYXRoO1xufTtcbiIsImltcG9ydCB7XG4gIHR5cGUgRnJvbVJvb3RNb2RlbCxcbiAgdHlwZSBGcm9tUm9vdFBhcmFtc01vZGVsLFxufSBmcm9tICdAbGliL2JhY2tlbmQvZmlsZS91dGlscy9mcm9tUm9vdC9mcm9tUm9vdC5tb2RlbHMnO1xuaW1wb3J0IHsgZ2V0Um9vdCB9IGZyb20gJ0BsaWIvYmFja2VuZC9maWxlL3V0aWxzL2dldFJvb3QvZ2V0Um9vdCc7XG5pbXBvcnQgeyBqb2luUGF0aHMgfSBmcm9tICdAbGliL2JhY2tlbmQvZmlsZS91dGlscy9qb2luUGF0aHMvam9pblBhdGhzJztcblxuZXhwb3J0IGNvbnN0IGZyb21Sb290ID0gKC4uLnBhdGhzOiBGcm9tUm9vdFBhcmFtc01vZGVsKTogRnJvbVJvb3RNb2RlbCA9PlxuICBqb2luUGF0aHMoW2dldFJvb3QoKSwgLi4ucGF0aHNdKTtcbiIsImltcG9ydCB7XG4gIHR5cGUgRnJvbVBhY2thZ2VzTW9kZWwsXG4gIHR5cGUgRnJvbVBhY2thZ2VzUGFyYW1zTW9kZWwsXG59IGZyb20gJ0BsaWIvYmFja2VuZC9maWxlL3V0aWxzL2Zyb21QYWNrYWdlcy9mcm9tUGFja2FnZXMubW9kZWxzJztcbmltcG9ydCB7IGZyb21Sb290IH0gZnJvbSAnQGxpYi9iYWNrZW5kL2ZpbGUvdXRpbHMvZnJvbVJvb3QvZnJvbVJvb3QnO1xuXG5leHBvcnQgY29uc3QgZnJvbVBhY2thZ2VzID0gKC4uLnBhdGhzOiBGcm9tUGFja2FnZXNQYXJhbXNNb2RlbCk6IEZyb21QYWNrYWdlc01vZGVsID0+XG4gIGZyb21Sb290KCdwYWNrYWdlcycsIC4uLnBhdGhzKTtcbiIsImltcG9ydCB7XG4gIHR5cGUgRnJvbVdvcmtpbmdNb2RlbCxcbiAgdHlwZSBGcm9tV29ya2luZ1BhcmFtc01vZGVsLFxufSBmcm9tICdAbGliL2JhY2tlbmQvZmlsZS91dGlscy9mcm9tV29ya2luZy9mcm9tV29ya2luZy5tb2RlbHMnO1xuaW1wb3J0IHsgam9pblBhdGhzIH0gZnJvbSAnQGxpYi9iYWNrZW5kL2ZpbGUvdXRpbHMvam9pblBhdGhzL2pvaW5QYXRocyc7XG5cbmV4cG9ydCBjb25zdCBmcm9tV29ya2luZyA9ICguLi5wYXRoczogRnJvbVdvcmtpbmdQYXJhbXNNb2RlbCk6IEZyb21Xb3JraW5nTW9kZWwgPT5cbiAgam9pblBhdGhzKFtwcm9jZXNzLmN3ZCgpLCAuLi5wYXRoc10pO1xuIiwiaW1wb3J0IHsgZnJvbVdvcmtpbmcgfSBmcm9tICdAbGliL2JhY2tlbmQvZmlsZS91dGlscy9mcm9tV29ya2luZy9mcm9tV29ya2luZyc7XG5pbXBvcnQgeyBqb2luUGF0aHMgfSBmcm9tICdAbGliL2JhY2tlbmQvZmlsZS91dGlscy9qb2luUGF0aHMvam9pblBhdGhzJztcbmltcG9ydCB7XG4gIHR5cGUgUGFjYWtnZUluZm9Nb2RlbCxcbiAgdHlwZSBQYWNrYWdlSW5mb1BhcmFtc01vZGVsLFxufSBmcm9tICdAbGliL3NoYXJlZC9jb3JlL3V0aWxzL3BhY2thZ2VJbmZvL3BhY2thZ2VJbmZvLm1vZGVscyc7XG5pbXBvcnQgeyByZWFkRmlsZVN5bmMgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyB0eXBlIFBhY2thZ2VKc29uIH0gZnJvbSAndHlwZS1mZXN0JztcblxuZXhwb3J0IGNvbnN0IHBhY2thZ2VJbmZvID0gKGRpcm5hbWU/OiBQYWNrYWdlSW5mb1BhcmFtc01vZGVsKTogUGFjYWtnZUluZm9Nb2RlbCA9PiB7XG4gIGNvbnN0IGZyb20gPSBkaXJuYW1lID8/IGZyb21Xb3JraW5nKCk7XG4gIHJldHVybiBKU09OLnBhcnNlKHJlYWRGaWxlU3luYyhqb2luUGF0aHMoW2Zyb20sICdwYWNrYWdlLmpzb24nXSkpLnRvU3RyaW5nKCkpIGFzIFBhY2thZ2VKc29uO1xufTtcbiIsImltcG9ydCB7IGNoaWxkcmVuIH0gZnJvbSAnQGxpYi9iYWNrZW5kL2ZpbGUvdXRpbHMvY2hpbGRyZW4vY2hpbGRyZW4nO1xuaW1wb3J0IHsgZnJvbVBhY2thZ2VzIH0gZnJvbSAnQGxpYi9iYWNrZW5kL2ZpbGUvdXRpbHMvZnJvbVBhY2thZ2VzL2Zyb21QYWNrYWdlcyc7XG5pbXBvcnQgeyBmaWx0ZXJOaWwgfSBmcm9tICdAbGliL3NoYXJlZC9jb3JlL3V0aWxzL2ZpbHRlck5pbC9maWx0ZXJOaWwnO1xuaW1wb3J0IHsgcGFja2FnZUluZm8gfSBmcm9tICdAbGliL3NoYXJlZC9jb3JlL3V0aWxzL3BhY2thZ2VJbmZvL3BhY2thZ2VJbmZvJztcbmltcG9ydCB7XG4gIHR5cGUgQXBwUHJvbXB0TW9kZWwsXG4gIHR5cGUgQXBwUHJvbXB0UGFyYW1zTW9kZWwsXG59IGZyb20gJ0B0b29sL3Rhc2svY29yZS91dGlscy9hcHBQcm9tcHQvYXBwUHJvbXB0Lm1vZGVscyc7XG5cbmV4cG9ydCBjb25zdCBhcHBQcm9tcHQgPSAocGFyYW1zPzogQXBwUHJvbXB0UGFyYW1zTW9kZWwpOiBBcHBQcm9tcHRNb2RlbCA9PiB7XG4gIGNvbnN0IG9wdGlvbnMgPSBmaWx0ZXJOaWwoXG4gICAgY2hpbGRyZW4oZnJvbVBhY2thZ2VzKCkpLm1hcCgodikgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBuYW1lIH0gPSBwYWNrYWdlSW5mbyh2LmZ1bGxQYXRoKTtcbiAgICAgICAgcmV0dXJuIHsgaWQ6IG5hbWUgPz8gJycsIGxhYmVsOiBuYW1lIH07XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgfSksXG4gICk7XG4gIHJldHVybiB7IGtleTogJ2FwcCcsIG9wdGlvbnMgfTtcbn07XG4iLCJleHBvcnQgY29uc3QgU0VSVkVSX0JVSUxEID0gJ3NlcnZlckJ1aWxkJztcbiIsImltcG9ydCB7IFdPUktGTE9XX1NURVBfVFlQRSB9IGZyb20gJ0BsaWIvbW9kZWwvb3JjaGVzdHJhdG9yL1dvcmtmbG93U3RlcC9Xb3JrZmxvd1N0ZXAuY29uc3RhbnRzJztcbmltcG9ydCB7IENPTlRBSU5FUl9CVUlMRCB9IGZyb20gJ0B0b29sL3Rhc2svY29udGFpbmVyL3Rhc2tzL2NvbnRhaW5lckJ1aWxkL2NvbnRhaW5lckJ1aWxkLmNvbnN0YW50cyc7XG5pbXBvcnQgeyB0eXBlIENvbnRhaW5lckJ1aWxkUGFyYW1zTW9kZWwgfSBmcm9tICdAdG9vbC90YXNrL2NvbnRhaW5lci90YXNrcy9jb250YWluZXJCdWlsZC9jb250YWluZXJCdWlsZC5tb2RlbHMnO1xuaW1wb3J0IHsgQ09OVEFJTkVSX1BVQkxJU0ggfSBmcm9tICdAdG9vbC90YXNrL2NvbnRhaW5lci90YXNrcy9jb250YWluZXJQdWJsaXNoL2NvbnRhaW5lclB1Ymxpc2guY29uc3RhbnRzJztcbmltcG9ydCB7IHR5cGUgQ29udGFpbmVyUHVibGlzaFBhcmFtc01vZGVsIH0gZnJvbSAnQHRvb2wvdGFzay9jb250YWluZXIvdGFza3MvY29udGFpbmVyUHVibGlzaC9jb250YWluZXJQdWJsaXNoLm1vZGVscyc7XG5pbXBvcnQgeyBhcHBQcm9tcHQgfSBmcm9tICdAdG9vbC90YXNrL2NvcmUvdXRpbHMvYXBwUHJvbXB0L2FwcFByb21wdCc7XG5pbXBvcnQgeyBTRVJWRVJfQlVJTEQgfSBmcm9tICdAdG9vbC90YXNrL25vZGUvd29ya2Zsb3dzL3NlcnZlckJ1aWxkL3NlcnZlckJ1aWxkLmNvbnN0YW50cyc7XG5pbXBvcnQgeyB0eXBlIFNlcnZlckJ1aWxkUGFyYW1zTW9kZWwgfSBmcm9tICdAdG9vbC90YXNrL25vZGUvd29ya2Zsb3dzL3NlcnZlckJ1aWxkL3NlcnZlckJ1aWxkLm1vZGVscyc7XG5pbXBvcnQgeyBTRVJWRVJfUFVCTElTSCB9IGZyb20gJ0B0b29sL3Rhc2svbm9kZS93b3JrZmxvd3Mvc2VydmVyUHVibGlzaC9zZXJ2ZXJQdWJsaXNoLmNvbnN0YW50cyc7XG5pbXBvcnQge1xuICB0eXBlIFNlcnZlclB1Ymxpc2hNb2RlbCxcbiAgdHlwZSBTZXJ2ZXJQdWJsaXNoUGFyYW1zTW9kZWwsXG59IGZyb20gJ0B0b29sL3Rhc2svbm9kZS93b3JrZmxvd3Mvc2VydmVyUHVibGlzaC9zZXJ2ZXJQdWJsaXNoLm1vZGVscyc7XG5pbXBvcnQgeyB0eXBlIEJ1aWxkV29ya2Zsb3dQYXJhbXNNb2RlbCB9IGZyb20gJ0B0b29sL3Rhc2svb3JjaGVzdHJhdG9yL3V0aWxzL2J1aWxkV29ya2Zsb3cvYnVpbGRXb3JrZmxvdy5tb2RlbHMnO1xuXG5leHBvcnQgY29uc3Qgc2VydmVyUHVibGlzaDogQnVpbGRXb3JrZmxvd1BhcmFtc01vZGVsPFxuICBTZXJ2ZXJQdWJsaXNoUGFyYW1zTW9kZWwsXG4gIFNlcnZlclB1Ymxpc2hNb2RlbCxcbiAgW1NlcnZlckJ1aWxkUGFyYW1zTW9kZWwsIENvbnRhaW5lckJ1aWxkUGFyYW1zTW9kZWwsIENvbnRhaW5lclB1Ymxpc2hQYXJhbXNNb2RlbF1cbj4gPSB7XG4gIG5hbWU6IFNFUlZFUl9QVUJMSVNILFxuXG4gIHByb21wdHM6IFthcHBQcm9tcHQoKV0sXG5cbiAgc3RlcHM6IChwYXJhbXMsIGNvbnRleHQpID0+IFtcbiAgICB7XG4gICAgICBjb250ZXh0OiB7IC4uLmNvbnRleHQsIGFwcDogcGFyYW1zLmFwcCB9LFxuICAgICAgbmFtZTogU0VSVkVSX0JVSUxELFxuICAgICAgdHlwZTogV09SS0ZMT1dfU1RFUF9UWVBFLldPUktGTE9XLFxuICAgIH0sXG5cbiAgICB7XG4gICAgICBjb250ZXh0OiB7IC4uLmNvbnRleHQsIGFwcDogcGFyYW1zLmFwcCB9LFxuICAgICAgbmFtZTogQ09OVEFJTkVSX0JVSUxELFxuICAgICAgcGFyYW1zOiB7IGRvY2tlcmZpbGVuYW1lOiAnRG9ja2VyZmlsZS5zZXJ2ZXInLCBpbWFnZTogYCR7cGFyYW1zLmFwcH0tc2VydmVyYCB9LFxuICAgIH0sXG5cbiAgICB7XG4gICAgICBjb250ZXh0OiB7IC4uLmNvbnRleHQsIGFwcDogcGFyYW1zLmFwcCB9LFxuICAgICAgbmFtZTogQ09OVEFJTkVSX1BVQkxJU0gsXG4gICAgICBwYXJhbXM6IHsgZG9ja2VyZmlsZW5hbWU6ICdEb2NrZXJmaWxlLnNlcnZlcicsIGltYWdlOiBgJHtwYXJhbXMuYXBwfS1zZXJ2ZXJgIH0sXG4gICAgfSxcbiAgXSxcbn07XG4iLCJpbXBvcnQgeyBzZXJ2ZXJQdWJsaXNoIGFzIHBhcmFtcyB9IGZyb20gJ0B0b29sL3Rhc2svbm9kZS93b3JrZmxvd3Mvc2VydmVyUHVibGlzaC9zZXJ2ZXJQdWJsaXNoJztcbmltcG9ydCB7IGJ1aWxkV29ya2Zsb3cgfSBmcm9tICdAdG9vbC90YXNrL29yY2hlc3RyYXRvci91dGlscy9idWlsZFdvcmtmbG93L2J1aWxkV29ya2Zsb3cnO1xuXG5leHBvcnQgY29uc3Qgc2VydmVyUHVibGlzaCA9IGJ1aWxkV29ya2Zsb3cocGFyYW1zKTtcbiIsImV4cG9ydCBjb25zdCBOT0RFX0RFViA9ICdub2RlRGV2JztcbiIsImltcG9ydCB7IGFwcFByb21wdCB9IGZyb20gJ0B0b29sL3Rhc2svY29yZS91dGlscy9hcHBQcm9tcHQvYXBwUHJvbXB0JztcbmltcG9ydCB7IE5PREVfREVWIH0gZnJvbSAnQHRvb2wvdGFzay9ub2RlL3Rhc2tzL25vZGVEZXYvbm9kZURldi5jb25zdGFudHMnO1xuaW1wb3J0IHsgdHlwZSBOb2RlRGV2UGFyYW1zTW9kZWwgfSBmcm9tICdAdG9vbC90YXNrL25vZGUvdGFza3Mvbm9kZURldi9ub2RlRGV2Lm1vZGVscyc7XG5pbXBvcnQgeyBTRVJWRVJfREVWIH0gZnJvbSAnQHRvb2wvdGFzay9ub2RlL3dvcmtmbG93cy9zZXJ2ZXJEZXYvc2VydmVyRGV2LmNvbnN0YW50cyc7XG5pbXBvcnQgeyB0eXBlIFNlcnZlckRldlBhcmFtc01vZGVsIH0gZnJvbSAnQHRvb2wvdGFzay9ub2RlL3dvcmtmbG93cy9zZXJ2ZXJEZXYvc2VydmVyRGV2Lm1vZGVscyc7XG5pbXBvcnQgeyB0eXBlIEJ1aWxkV29ya2Zsb3dQYXJhbXNNb2RlbCB9IGZyb20gJ0B0b29sL3Rhc2svb3JjaGVzdHJhdG9yL3V0aWxzL2J1aWxkV29ya2Zsb3cvYnVpbGRXb3JrZmxvdy5tb2RlbHMnO1xuXG5leHBvcnQgY29uc3Qgc2VydmVyRGV2OiBCdWlsZFdvcmtmbG93UGFyYW1zTW9kZWw8U2VydmVyRGV2UGFyYW1zTW9kZWwsIHZvaWQsIFtOb2RlRGV2UGFyYW1zTW9kZWxdPiA9XG4gIHtcbiAgICBuYW1lOiBTRVJWRVJfREVWLFxuXG4gICAgcHJvbXB0czogW2FwcFByb21wdCgpXSxcblxuICAgIHN0ZXBzOiAoeyBhcHAsIHBhdGhuYW1lIH0sIGNvbnRleHQpID0+IFtcbiAgICAgIHtcbiAgICAgICAgY29udGV4dDogeyAuLi5jb250ZXh0LCBhcHAgfSxcbiAgICAgICAgbmFtZTogTk9ERV9ERVYsXG4gICAgICAgIHBhcmFtczogeyBwYXRobmFtZSB9LFxuICAgICAgfSxcbiAgICBdLFxuICB9O1xuIiwiaW1wb3J0IHsgc2VydmVyRGV2IGFzIHBhcmFtcyB9IGZyb20gJ0B0b29sL3Rhc2svbm9kZS93b3JrZmxvd3Mvc2VydmVyRGV2L3NlcnZlckRldic7XG5pbXBvcnQgeyBidWlsZFdvcmtmbG93IH0gZnJvbSAnQHRvb2wvdGFzay9vcmNoZXN0cmF0b3IvdXRpbHMvYnVpbGRXb3JrZmxvdy9idWlsZFdvcmtmbG93JztcblxuZXhwb3J0IGNvbnN0IHNlcnZlckRldiA9IGJ1aWxkV29ya2Zsb3cocGFyYW1zKTtcbiIsImV4cG9ydCBjb25zdCBOT0RFX0JVSUxEID0gJ25vZGVCdWlsZCc7XG4iLCJpbXBvcnQgeyBFTlZJUk9OTUVOVCB9IGZyb20gJ0BsaWIvc2hhcmVkL2Vudmlyb25tZW50L2Vudmlyb25tZW50LmNvbnN0YW50cyc7XG5pbXBvcnQgeyBOT0RFX0JVSUxEIH0gZnJvbSAnQHRvb2wvdGFzay9ub2RlL3Rhc2tzL25vZGVCdWlsZC9ub2RlQnVpbGQuY29uc3RhbnRzJztcbmltcG9ydCB7IHR5cGUgTm9kZUJ1aWxkUGFyYW1zTW9kZWwgfSBmcm9tICdAdG9vbC90YXNrL25vZGUvdGFza3Mvbm9kZUJ1aWxkL25vZGVCdWlsZC5tb2RlbHMnO1xuaW1wb3J0IHsgU0VSVkVSX0JVSUxEIH0gZnJvbSAnQHRvb2wvdGFzay9ub2RlL3dvcmtmbG93cy9zZXJ2ZXJCdWlsZC9zZXJ2ZXJCdWlsZC5jb25zdGFudHMnO1xuaW1wb3J0IHsgdHlwZSBTZXJ2ZXJCdWlsZFBhcmFtc01vZGVsIH0gZnJvbSAnQHRvb2wvdGFzay9ub2RlL3dvcmtmbG93cy9zZXJ2ZXJCdWlsZC9zZXJ2ZXJCdWlsZC5tb2RlbHMnO1xuaW1wb3J0IHsgdHlwZSBCdWlsZFdvcmtmbG93UGFyYW1zTW9kZWwgfSBmcm9tICdAdG9vbC90YXNrL29yY2hlc3RyYXRvci91dGlscy9idWlsZFdvcmtmbG93L2J1aWxkV29ya2Zsb3cubW9kZWxzJztcblxuZXhwb3J0IGNvbnN0IHNlcnZlckJ1aWxkOiBCdWlsZFdvcmtmbG93UGFyYW1zTW9kZWw8XG4gIFNlcnZlckJ1aWxkUGFyYW1zTW9kZWwsXG4gIHZvaWQsXG4gIFtOb2RlQnVpbGRQYXJhbXNNb2RlbF1cbj4gPSB7XG4gIGNvbnRleHQ6IHtcbiAgICBlbnZpcm9ubWVudDogRU5WSVJPTk1FTlQuUFJPRFVDVElPTixcbiAgfSxcblxuICBuYW1lOiBTRVJWRVJfQlVJTEQsXG5cbiAgc3RlcHM6ICh7IGVudHJ5RmlsZXMgPSAnc3JjL2luZGV4LnRzJywgZm9ybWF0LCBvdXREaXJuYW1lLCB3YXRjaCB9LCBjb250ZXh0KSA9PiBbXG4gICAge1xuICAgICAgY29udGV4dCxcbiAgICAgIG5hbWU6IE5PREVfQlVJTEQsXG4gICAgICBwYXJhbXM6IHtcbiAgICAgICAgZW50cnlGaWxlcyxcbiAgICAgICAgZm9ybWF0LFxuICAgICAgICBvdXREaXJuYW1lLFxuICAgICAgICB3YXRjaCxcbiAgICAgIH0sXG4gICAgfSxcbiAgXSxcbn07XG4iLCJpbXBvcnQgeyBzZXJ2ZXJCdWlsZCBhcyBwYXJhbXMgfSBmcm9tICdAdG9vbC90YXNrL25vZGUvd29ya2Zsb3dzL3NlcnZlckJ1aWxkL3NlcnZlckJ1aWxkJztcbmltcG9ydCB7IGJ1aWxkV29ya2Zsb3cgfSBmcm9tICdAdG9vbC90YXNrL29yY2hlc3RyYXRvci91dGlscy9idWlsZFdvcmtmbG93L2J1aWxkV29ya2Zsb3cnO1xuXG5leHBvcnQgY29uc3Qgc2VydmVyQnVpbGQgPSBidWlsZFdvcmtmbG93KHBhcmFtcyk7XG4iLCJleHBvcnQgY29uc3QgQlVJTERfTElOVCA9ICdidWlsZExpbnQnO1xuIiwiZXhwb3J0IGNvbnN0IEJVSUxEX1RZUEVTQ1JJUFQgPSAnYnVpbGRUeXBlc2NyaXB0JztcbiIsImltcG9ydCB7IEVOVklST05NRU5UIH0gZnJvbSAnQGxpYi9zaGFyZWQvZW52aXJvbm1lbnQvZW52aXJvbm1lbnQuY29uc3RhbnRzJztcbmltcG9ydCB7IHR5cGUgV3JpdGVGaWxlUGFyYW1zTW9kZWwgfSBmcm9tICdAdG9vbC90YXNrL2NvcmUvdGFza3Mvd3JpdGVGaWxlL3dyaXRlRmlsZS5tb2RlbHMnO1xuaW1wb3J0IHsgQlVJTERfTElOVCB9IGZyb20gJ0B0b29sL3Rhc2svbm9kZS90YXNrcy9idWlsZExpbnQvYnVpbGRMaW50LmNvbnN0YW50cyc7XG5pbXBvcnQgeyBCVUlMRF9UWVBFU0NSSVBUIH0gZnJvbSAnQHRvb2wvdGFzay9ub2RlL3Rhc2tzL2J1aWxkVHlwZXNjcmlwdC9idWlsZFR5cGVzY3JpcHQuY29uc3RhbnRzJztcbmltcG9ydCB7IHR5cGUgTm9kZUJ1aWxkUGFyYW1zTW9kZWwgfSBmcm9tICdAdG9vbC90YXNrL25vZGUvdGFza3Mvbm9kZUJ1aWxkL25vZGVCdWlsZC5tb2RlbHMnO1xuaW1wb3J0IHsgQlVJTERfQ09ORklHIH0gZnJvbSAnQHRvb2wvdGFzay9ub2RlL3dvcmtmbG93cy9idWlsZENvbmZpZy9idWlsZENvbmZpZy5jb25zdGFudHMnO1xuaW1wb3J0IHsgdHlwZSBCdWlsZENvbmZpZ1BhcmFtc01vZGVsIH0gZnJvbSAnQHRvb2wvdGFzay9ub2RlL3dvcmtmbG93cy9idWlsZENvbmZpZy9idWlsZENvbmZpZy5tb2RlbHMnO1xuaW1wb3J0IHsgdHlwZSBCdWlsZFdvcmtmbG93UGFyYW1zTW9kZWwgfSBmcm9tICdAdG9vbC90YXNrL29yY2hlc3RyYXRvci91dGlscy9idWlsZFdvcmtmbG93L2J1aWxkV29ya2Zsb3cubW9kZWxzJztcblxuZXhwb3J0IGNvbnN0IGJ1aWxkQ29uZmlnOiBCdWlsZFdvcmtmbG93UGFyYW1zTW9kZWw8XG4gIEJ1aWxkQ29uZmlnUGFyYW1zTW9kZWwsXG4gIHZvaWQsXG4gIFtOb2RlQnVpbGRQYXJhbXNNb2RlbCwgV3JpdGVGaWxlUGFyYW1zTW9kZWxdXG4+ID0ge1xuICBjb250ZXh0OiB7XG4gICAgZW52aXJvbm1lbnQ6IEVOVklST05NRU5ULlBST0RVQ1RJT04sXG4gIH0sXG5cbiAgbmFtZTogQlVJTERfQ09ORklHLFxuXG4gIHN0ZXBzOiAoKSA9PiBbeyBuYW1lOiBCVUlMRF9MSU5UIH0sIHsgbmFtZTogQlVJTERfVFlQRVNDUklQVCB9XSxcbn07XG4iLCJpbXBvcnQgeyBidWlsZENvbmZpZyBhcyBwYXJhbXMgfSBmcm9tICdAdG9vbC90YXNrL25vZGUvd29ya2Zsb3dzL2J1aWxkQ29uZmlnL2J1aWxkQ29uZmlnJztcbmltcG9ydCB7IGJ1aWxkV29ya2Zsb3cgfSBmcm9tICdAdG9vbC90YXNrL29yY2hlc3RyYXRvci91dGlscy9idWlsZFdvcmtmbG93L2J1aWxkV29ya2Zsb3cnO1xuXG5leHBvcnQgY29uc3QgYnVpbGRDb25maWcgPSBidWlsZFdvcmtmbG93KHBhcmFtcyk7XG4iLCJleHBvcnQgY29uc3QgUElOR19UQVNLID0gJ3BpbmdUYXNrJztcbiIsImltcG9ydCB7IFBJTkdfVEFTSyB9IGZyb20gJ0B0b29sL3Rhc2svZGV2L3Rhc2tzL3BpbmdUYXNrL3BpbmdUYXNrLmNvbnN0YW50cyc7XG5pbXBvcnQgeyBQSU5HX1dPUktGTE9XIH0gZnJvbSAnQHRvb2wvdGFzay9kZXYvd29ya2Zsb3dzL3BpbmdXb3JrZmxvdy9waW5nV29ya2Zsb3cuY29uc3RhbnRzJztcbmltcG9ydCB7IHR5cGUgUGluZ1dvcmtmbG93UGFyYW1zTW9kZWwgfSBmcm9tICdAdG9vbC90YXNrL2Rldi93b3JrZmxvd3MvcGluZ1dvcmtmbG93L3BpbmdXb3JrZmxvdy5tb2RlbHMnO1xuaW1wb3J0IHsgdHlwZSBCdWlsZFdvcmtmbG93UGFyYW1zTW9kZWwgfSBmcm9tICdAdG9vbC90YXNrL29yY2hlc3RyYXRvci91dGlscy9idWlsZFdvcmtmbG93L2J1aWxkV29ya2Zsb3cubW9kZWxzJztcblxuZXhwb3J0IGNvbnN0IHBpbmdXb3JrZmxvdzogQnVpbGRXb3JrZmxvd1BhcmFtc01vZGVsPFxuICBQaW5nV29ya2Zsb3dQYXJhbXNNb2RlbCxcbiAgdm9pZCxcbiAgW1BpbmdXb3JrZmxvd1BhcmFtc01vZGVsXVxuPiA9IHtcbiAgbmFtZTogUElOR19XT1JLRkxPVyxcblxuICBwcm9tcHRzOiBbeyBrZXk6ICd0ZXN0JyB9XSxcblxuICBzdGVwczogKHBhcmFtcywgY29udGV4dCkgPT4gW3sgbmFtZTogUElOR19UQVNLLCBwYXJhbXMgfV0sXG59O1xuIiwiaW1wb3J0IHsgcGluZ1dvcmtmbG93IGFzIHBhcmFtcyB9IGZyb20gJ0B0b29sL3Rhc2svZGV2L3dvcmtmbG93cy9waW5nV29ya2Zsb3cvcGluZ1dvcmtmbG93JztcbmltcG9ydCB7IGJ1aWxkV29ya2Zsb3cgfSBmcm9tICdAdG9vbC90YXNrL29yY2hlc3RyYXRvci91dGlscy9idWlsZFdvcmtmbG93L2J1aWxkV29ya2Zsb3cnO1xuXG5leHBvcnQgY29uc3QgcGluZ1dvcmtmbG93ID0gYnVpbGRXb3JrZmxvdyhwYXJhbXMpO1xuIl0sIm5hbWVzIjpbIkxPR19NRVNTQUdFX1RZUEUiLCJXT1JLRkxPV19FWEVDVVRJT04iLCJXT1JLRkxPV19TVEVQX1RZUEUiLCJFTlZJUk9OTUVOVCIsIlBMQVRGT1JNIiwid2ViRGV2IiwicGFyYW1zIiwib3JjaGVzdHJhdG9yUnVuIiwic2VydmVyUHVibGlzaCIsInNlcnZlckRldiIsInNlcnZlckJ1aWxkIiwiYnVpbGRDb25maWciLCJwaW5nV29ya2Zsb3ciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFTyxJQUFLLHFDQUFBQSxzQkFBTDtBQUNMQSxvQkFBQSxNQUFBLElBQU87QUFDUEEsb0JBQUEsU0FBQSxJQUFVO0FBRkEsU0FBQUE7QUFB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
